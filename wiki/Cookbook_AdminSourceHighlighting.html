<div id="contentbox">
 <div class="widget">
 <h1>
  <a name="Source_Highlighting_Integration"> Source Highlighting Integration </a>
</h1>
<p />
The following diff documents the change made to <a href="/TWiki/SyntaxHighlightingPlugin">SyntaxHighlightingPlugin</a>, to integrate the <a href="/Sandbox/ScmToXexpr">ScmToXexpr</a> Scheme source highlighting program.  The diff applies to SyntaxHighlightingPlugin.pm.
<p />
All the change does is test whether the specified language is "scheme", and if so, submits an HTTP POST request containing the specified source code, to the source formatting servlet (see source listing at <a href="/Sandbox/ScmToXexpr">ScmToXexpr</a>).  The HTML returned by the servlet is returned to the invoker of the plugin.
<p />
<table width="100%" border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td bgcolor="#FFFFFF">
      <pre>*** SyntaxHighlightingPlugin.original.pm        Sat Apr 10 15:05:13 2004
--- SyntaxHighlightingPlugin.pm Thu Apr 22 19:40:37 2004
***************
*** 33,36 ****
--- 33,38 ----
  <b><font color="#A020F0">use</font></b> IPC::Open2;
+ <b><font color="#A020F0">use</font></b> LWP::UserAgent;
+ <b><font color="#A020F0">use</font></b> HTTP::Request::Common;
  <b><font color="#A020F0">use</font></b> vars <b><font color="#A020F0">qw</font></b>(
***************
*** 120,123 ****
--- 122,131 ----
      <b><font color="#A020F0">my</font></b> ($lang, $text, $nb_option, $nb_start) = @_;
+
+     <b><font color="#A020F0">if</font></b> ($lang <b><font color="#A020F0">eq</font></b> <b><font color="#BC8F8F">"scheme"</font></b>) {
+         <b><font color="#A020F0">my</font></b> $ua = LWP::UserAgent-&gt;new;
+         <b><font color="#A020F0">my</font></b> $response = $ua-&gt;simple_request(POST <b><font color="#BC8F8F">'http://127.0.0.1:8000/servlets/pretty.scm'</font></b>, [source =&gt; $text]);
+         <b><font color="#A020F0">return</font></b> $response-&gt;content;
+     }
      <b><font color="#A020F0">my</font></b> $highlighted = pipeThru(<b><font color="#BC8F8F">"enscript --color --language=html --highlight=$langs{lc($lang)} -o - -q"</font></b>, $text);</pre>
    </td>
  </tr>
</table>
<p />
-- <a href="/Main/AntonVanStraaten">AntonVanStraaten</a> - 22 Apr 2004
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Admin </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/AdminTopics">AdminTopics</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> Next Topic:</th>
  <td align="left">  </td>
</tr>
</table>
<p />
 </div>
</div>
