<div id="contentbox">
 <div class="widget">
  <p />
<h1>
  <a name="Exceptions"> Exceptions </a>
</h1>
<p />
The exception system in <a href="/Cookbook/MzScheme">MzScheme</a> is the one proposed by <a href="http://www.cs.indiana.edu/scheme-repository/doc.proposals.exceptions.html" target="_top">Friedman, Haynes and Dybvig</a>.
<p />
A program can signal an exceptional situation by <code>raising</code> an expression. The form <code>(raise exn)</code> will pass <code>exn</code>, which can be anything, to the <code>current exception handler</code>. The form <code>with-handlers</code> can be used to temporarily extend the current exception handler while executing its body of code.
<p />
500 Can't connect to 127.0.0.1:8778 (connect: Connection refused)
<p />
<p />
The above example used the predicate <code>always-true</code> to determine whether the exception handler <code>my-handler</code> should take care of the exception or whether it should be passed on to the current exception handler. Since <code>always-true</code> always returns <code>#t</code> all exceptions will be handled by <code>my-handler</code>.
<p />
Since the stop button in <a href="/Cookbook/DrScheme">DrScheme</a> works by raising a break exception, normally one uses the predicate <code>exn:fail?</code> in order to catch all
exceptions but breaks. If <code>exn:fail?</code> is used, the stop button works even if a programming mistake is made in the exception handler.
<p />
500 Can't connect to 127.0.0.1:8778 (connect: Connection refused)
<p />
<p />
It is good style to only catch the exceptions that one is interested in. Therefore check the <a href="/Cookbook/HelpDesk">HelpDesk</a> to see, what exceptions are thrown by the various functions.
<p />
As an example lets look at <code>tcp-connect</code>. The <a href="/Cookbook/HelpDesk">HelpDesk</a> says:
<p />
<pre>
If a connection cannot be established by tcp-connect, the exn:fail:network exception is raised.
</pre>
<p />
Therefore we need to catch the <code>exn:fail:network</code> exception:
<p />
500 Can't connect to 127.0.0.1:8778 (connect: Connection refused)
<p />
<p />
Notice that <code>tcp-connect</code> blocks breaks. If you want to enable breaks during tcp-connects use the function <code>tcp-connect/enable-break</code> instead.
<p />
-- <a href="/Main/JensAxelSoegaard">JensAxelSoegaard</a> - 26 Apr 2004
<p />
<p />
<p />
The following snippet shows how we can create application-level exceptions that subtype <code>exn:fail</code>.
500 Can't connect to 127.0.0.1:8778 (connect: Connection refused)
<p />
<p />
If you want to raise an exception in response to a lower-level exception, and both are subtypes of <code>exn</code>, set the continuation-marks field of the new exception using those from the lower-level exception.  This allows a stack trace to show the source of the original exception.  For example:
<p />
500 Can't connect to 127.0.0.1:8778 (connect: Connection refused)
<p />
<p />
<p />
<h2>
  <a name="Comments"> Comments </a>
</h2>
<p />
<code>not-break-exn?</code> is obsolete as of one of the PLT v299 revisions.  I believe it has been replaced by <code>exn:fail?</code>.
<p />
-- <a href="/Main/AntonVanStraaten">AntonVanStraaten</a> - 11 Oct 2005
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/GettingStartedRecipes">GettingStartedRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left">  </td>
</tr>
</table>
<p />
 </div>
</div>
