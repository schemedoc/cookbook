<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Making_A_Directory_If_It_Doesn_t"> Making A Directory If It Doesn't Already Exist </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to create a directory only if it doesn't already exist.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
Use <code>make-directory*</code> from the <code>file.ss</code> module in Mzlib.  For example:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"file.ss"</span>))
<span class="builtin">&gt;</span> (<span class="variable">directory-exists?</span> <span class="selfeval">"foo"</span>) <span class="comment">; show the directory doesn't exist
</span><span class="selfeval">#f</span>
<span class="builtin">&gt;</span> (<span class="variable">make-directory*</span> <span class="selfeval">"foo"</span>)   <span class="comment">; create the directory
</span><span class="builtin">&gt;</span> (<span class="variable">directory-exists?</span> <span class="selfeval">"foo"</span>) <span class="comment">; show the directory exists
</span><span class="selfeval">#t</span>
<span class="builtin">&gt;</span> (<span class="variable">make-directory*</span> <span class="selfeval">"foo"</span>)   <span class="comment">; no error is raised if the directory already exists
</span></pre>
</div>
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
The function <code>make-directory*</code> will make all the directories specified by it's argument that don't already exist.  So to create the directory tree "foo/bar" (if it doesn't already exist) you could call <code>make-directory*</code> like so:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="variable">make-directory*</span> <span class="selfeval">"foo/bar"</span>)
</pre>
</div>
<p />
If you wanted to ensure that only one directory was created, not an entire tree, you could build your own function on top of <code>make-directory</code>.  The function <code>make-directory</code> raises an exception if the directory already exists so you have to check for the directory before you attempt to create it.  The function <code>maybe-make-directory</code> does this:
<p />
<div class="scheme">
  <pre>(<span class="keyword">define</span> (<span class="variable">maybe-make-directory</span> <span class="variable">directory</span>)
  (<span class="keyword">unless</span> (<span class="variable">directory-exists?</span> <span class="variable">directory</span>)
      (<span class="variable">make-directory</span> <span class="variable">directory</span>)))
</pre>
</div>
<p />
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/NoelWelsh">NoelWelsh</a> - 18 May 2004
<p />
-- <a href="/Main/DaveHerman">DaveHerman</a> - 22 Feb 2005
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/FileRecipes">FileRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left">  </td>
</tr>
</table>
<p />
 </div>
</div>
