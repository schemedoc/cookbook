<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Streams"> Streams </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to handle state in a functional manner.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
The concept you're looking for is called a "Stream".
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
The canonical reference for Streams is in SICP, where Abelson and Sussman introduce the concept in <a href="http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5" target="_top">Section 3.5</a>.  The motivation behind Streams is to model a list of potentially infinite size.  Clearly, even if you take infinite to mean "a very big list", memory would be a problem.  In the example from SICP, they consider the case of searching for large prime integers.  It would be more schemely to use something like <code>filter</code> on a list of integers to return the list of prime integers for a given range, but for large integers, you would need to retain a very long list, because primes get farther apart the bigger the numbers in question get.  The idea extends to any data structure that's bigger than memory, or to any operation that's expensive (either computationally or due to I/O costs) - delaying the evaluation of any expensive operation will improve performance, particularly <em>if the results of evaluating that expression may not be used</em>.
<p />
<a href="http://srfi.schemers.org/srfi-41/srfi-41.html" target="_top">SRFI-41</a>(replaces <a href="http://srfi.schemers.org/srfi-40/srfi-40.html" target="_top">SRFI-40</a>) defines a portable stream library.  The primary difference between the <a href="/Cookbook/SRFI">SRFI</a> and the SICP approaches is that SICP introduced an "odd" stream approach, while the <a href="/Cookbook/SRFI">SRFI</a> follows an "even" approach.  The <a href="/Cookbook/SRFI">SRFI</a> document has an excellent comparison of the two approaches, but the simple explanation of the difference is that even streams delay evaluation of the stream until absolutely necessary, whereas odd streams are evaluated at the time of reference, and are therefore subject to being evaluated once more than necessary.
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/NoelWelsh">NoelWelsh</a> - 20 Sep 2004
<p />
-- <a href="/Main/GordonWeakliem">GordonWeakliem</a> - 20 Sep 2004
<p />
changed <a href="/Cookbook/SRFI">SRFI</a>-40 to <a href="/Cookbook/SRFI">SRFI</a>-41
-- <a href="/Main/StephenDeGabrielle">StephenDeGabrielle</a> - 04 Feb 2008
<p />
<p />
<ul>
<li> <a href="http://schemecookbook.org/twiki/pub/Cookbook/IdiomStreams/prime-stream.ss" target="_top">prime-stream.ss</a>: example of using a stream of primes to factor numb
</li>
</ul>
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> <a href="/Cookbook/RecipeStub">RecipeStub</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/IdiomRecipes">IdiomRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 999 </td>
</tr>
</table>
  <p />
<table border="1" cellspacing="0" cellpadding="1"> <tr>
  <th align="center" bgcolor="#99CCCC"> <strong><a href="/TWiki/FileAttachment">Attachment</a>:</strong> </th>
  <th align="center" bgcolor="#99CCCC"> <strong>Action:</strong> </th>
  <th align="center" bgcolor="#99CCCC"> <strong>Size:</strong> </th>
  <th align="center" bgcolor="#99CCCC"> <strong>Date:</strong> </th>
  <th align="center" bgcolor="#99CCCC"> <strong>Who:</strong> </th>
  <th align="center" bgcolor="#99CCCC"> <strong>Comment:</strong> </th>
</tr>
<tr>
  <td>  <img src="/twiki/pub/icn/else.gif" width="16" height="16" align="top" alt=""> <a href="/twiki/pub/Cookbook/IdiomStreams/prime-stream.ss">prime-stream.ss</a>     </td>
  <td>  <a href="http://schemecookbook.org/attach/Cookbook/IdiomStreams?filename=prime-stream.ss&amp;amp;revInfo=1">action</a>     </td>
  <td>  1029  </td>
  <td>  14 Aug 2006 - 00:17  </td>
  <td>  <a href="/Main/EricHanchrow">EricHanchrow</a>  </td>
  <td>  example of using a stream of primes to factor numb  </td>
</tr>
</table>
<p />
 </div>
</div>
