<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Printing_Numbers"> Printing Numbers </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to print a number with a specified a format.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
The generic printing functions, <code>display</code>, <code>write</code>, <code>format</code>, and so on don't give you much control over the formatting of numbers.  There are few ways to print numbers in custom formats.
<p />
<a href="/Cookbook/SRFI">SRFI</a>-48 provides some basic numeric formatting capability with the <code>~F</code> specifier.  The <code>~F</code> specifier should be preceded by at least one number, for example <code>~4F</code>, which specifies the minimum width of its output.  Output smaller than the minimum will have spaces added to the front of the string to take it to the minimum.   If you follow the width with a comma and another number, for example <code>~4,4F</code> that number determines how many places are printed after the decimal.  Here are examples showing both forms:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"48.ss"</span> <span class="selfeval">"srfi"</span>))
<span class="builtin">&gt;</span> (<span class="variable">format</span> <span class="selfeval">"~4F"</span> <span class="selfeval">10</span>)
<span class="selfeval">"  10"</span>
<span class="builtin">&gt;</span> (<span class="variable">format</span> <span class="selfeval">"~4,4F"</span> (<span class="builtin">sqrt</span> <span class="selfeval">2</span>))
<span class="selfeval">"1.4142"</span>
</pre>
</div>
<p />
An alternative formatting procedure is provided by <code>real-&gt;decimal-string</code> in <code>(lib "string.ss")</code>.  This function prints a number with a fixed number of digits after the decimal point to a string.  By default numbers are printed with two digits after the decimal but you can control this.  Here are some examples:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"string.ss"</span>))
<span class="builtin">&gt;</span> (<span class="variable">real-&gt;decimal-string</span> <span class="selfeval">100</span>)
<span class="selfeval">"100.00"</span>
<span class="builtin">&gt;</span> (<span class="variable">real-&gt;decimal-string</span> <span class="selfeval">100.001</span>)
<span class="selfeval">"100.00"</span>
<span class="builtin">&gt;</span> (<span class="variable">real-&gt;decimal-string</span> <span class="selfeval">3.1415927</span> <span class="selfeval">4</span>)
<span class="selfeval">"3.1416"</span>
</pre>
</div>
<p />
Finally, here is a procedure to print number in scientific format:
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"string.ss"</span>))
(<span class="keyword">define</span> <span class="variable">real-&gt;scientific-string</span>
   (<span class="variable">case-lambda</span>
     [(<span class="variable">x</span>)
      (<span class="variable">real-&gt;scientific-string</span> <span class="variable">x</span> <span class="selfeval">2</span>)]
     [(<span class="variable">x</span> <span class="variable">digits-after-decimal-k</span>)
      (<span class="keyword">let*</span> ([<span class="variable">sign</span>         (<span class="keyword">if</span> (<span class="builtin">negative?</span> <span class="variable">x</span>) <span class="selfeval">-1</span> <span class="selfeval">+1</span>)]
             [<span class="variable">x</span>            (<span class="builtin">*</span> <span class="variable">sign</span> (<span class="builtin">inexact-&gt;exact</span> <span class="variable">x</span>))]
             [<span class="variable">e-orig</span>       (<span class="builtin">inexact-&gt;exact</span> (<span class="builtin">floor</span> (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) (<span class="builtin">log</span> <span class="selfeval">10</span>))))]
             [<span class="variable">e</span>            (<span class="builtin">inexact-&gt;exact</span>
                               (<span class="builtin">-</span> (<span class="builtin">floor</span> (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) (<span class="builtin">log</span> <span class="selfeval">10</span>)))))]
             [<span class="variable">x-normalized</span> (<span class="builtin">*</span> (<span class="builtin">inexact-&gt;exact</span> <span class="variable">x</span>) (<span class="builtin">expt</span> <span class="selfeval">10</span> <span class="variable">e</span>))])
            (<span class="variable">format</span> <span class="selfeval">"~a~ae~a"</span>
                    (<span class="keyword">if</span> (<span class="builtin">negative?</span> <span class="variable">sign</span>) <span class="selfeval">"-"</span> <span class="selfeval">""</span>)
                    (<span class="keyword">if</span> (<span class="builtin">zero?</span> <span class="variable">digits-after-decimal-k</span>)
                        (<span class="builtin">round</span> <span class="variable">x-normalized</span>)
                        (<span class="variable">real-&gt;decimal-string</span>
                            (<span class="builtin">exact-&gt;inexact</span> <span class="variable">x-normalized</span>)
                             <span class="variable">digits-after-decimal-k</span>))
                    <span class="variable">e-orig</span>))]))
</pre>
</div>
<p />
Here are some examples of its use:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="variable">real-&gt;scientific-string</span> <span class="selfeval">100</span>)
<span class="selfeval">"1.00e2"</span>
<span class="builtin">&gt;</span> (<span class="variable">real-&gt;scientific-string</span> <span class="selfeval">100.1</span>)
<span class="selfeval">"1.00e2"</span>
<span class="builtin">&gt;</span> (<span class="variable">real-&gt;scientific-string</span> <span class="selfeval">100.1</span> <span class="selfeval">4</span>)
<span class="selfeval">"1.0010e2"</span>
</pre>
</div>
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
<p />
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
Adapted from a plt-scheme post
<p />
<a href="http://list.cs.brown.edu/pipermail/plt-scheme/2006-December/015621.html" target="_top">http://list.cs.brown.edu/pipermail/plt-scheme/2006-December/015621.html</a>
<p />
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/NoelWelsh">NoelWelsh</a> - 05 May 2007
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/NumberRecipes">NumberRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 999 </td>
</tr>
</table>
<p />
 </div>
</div>
