<div id="contentbox">
 <div class="widget">
  <p />
<h1>
  <a name="Files_and_Directories"> Files and Directories </a>
</h1>
<p />
<p />
<p />
<a href="/Cookbook/ToDo">ToDo</a>: Create examples where necessary for this introduction.
<p />
<h2>
  <a name="Introduction"> Introduction </a>
</h2>
<p />
This chapter deals with file access, that is opening files, passing files as arguments to procedures that work with them, and so on.
<p />
<p />
<h3>
  <a name="Ports"> Ports </a>
</h3>
<p />
File access and manipulation in Scheme is done by means of ports (as the R5RS puts it: "To Scheme, an input port is a Scheme object that can deliver characters upon command, while an output port is a Scheme object that can accept characters"). When you want to work with a file it's necessary to first associate it with a port, you then feed this port to the procedures for I/O. It's required that ports associated with files be closed when they're no longer in use.
<p />
Ports can be opened for input or for output, but not for both (in PLT Scheme there exists the <code>open-input-output-file</code> procedure, which returns 2 ports: one for input and one for output; more on this later). You can use the predicates <code>port?</code>, <code>input-port?</code>, <code>output-port?</code> to know when a value is a port, and whether it's for input or output, respectively.
<p />
All I/O procedures take as an optional parameter a port, and if not specified they will use whatever value the procedures <code>current-input-port</code> and <code>current-output-port</code> return. This procedures are handled in PLT Scheme as parameter procedures, which means they can also be used to change the values for the default input/output ports (for more information see ...). PLT Scheme also provides a default error output port that can be obtained/modified using the parameter procedure <code>current-error-port</code>.
<p />
Files are not the only objects you can associate with ports. You can also read from and write to string ports, pipes, and even custom ports.
<p />
 -- Insert your favorite example code snippet for the above here --
<p />
<p />
<h3>
  <a name="File_Stream_Ports"> File-Stream Ports </a>
</h3>
<p />
Ports associated with files are of a special kind: they are file-stream ports. These differ from others in that they use a buffer, input file-stream ports cache characters in the buffer to speed up future reads, while output file-stream ports use the buffer to accumulate characters and write them as a group. This is one of the main reasons it can be confusing to have both input and output file-stream ports open on the same file at the same time, as their respective buffers are not necessarily syncrhronized.
<p />
To identify file-stream ports you can use the predicate <code>file-stream-port?</code>. Buffered data in file-stream output ports can be forced out using <code>flush-output</code>, although this is typically done automatically after each newline (this behavior can be changed using <code>file-stream-buffer-mode</code> to, for instance, not wait for newlines but flush immediately).
<p />
Random file access can be achieved by using the procedure <code>file-position</code> (not all file-stream ports support this, which if used in such a situation would raise a <code>exn:i/o:port</code> exception). This can be used either to obtain the current read/write position of a port, and to change it. When specifying a position past the size of the file, it is first padded with <code>#\nul</code> characters until the required size is met, and then the position is set. You should also know that changing the position on a file-access port causes it's buffer to be emptied first: for output ports it's flushed, and for input ports it's cleared.
<p />
<p />
<h2>
  <a name="References"> References </a>
</h2>
<p />
<a href="/Cookbook/ToDo">ToDo</a>: Insert <em>See Also</em> s
<p />
<p />
<p />
<p />
<h2>
  <a name="Recipes"> Recipes </a>
</h2>
<p />
<ul>
<li> <a href="/Cookbook/FileIsADirectory">Testing Whether A File Is A Directory</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileMakePlatformIndependentPath">Creating a Platform Independent Path</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileMaybeMakeDirectory">Making A Directory If It Doesn't Already Exist</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileReadingLines">Reading Lines from a Text File</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileSplitPath">Splitting a Path into All of Its Parts</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileWalkDirectoryTree">Walking Directory Trees</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileCountLines">Counting Lines in a File</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileRead">Reading An Entire Text File</a> (Recipe)
</li>
<li> <a href="/Cookbook/CreatingAiffs">Creating simple AIFF audio files</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileAppendFiles">Appending Files Together</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileChangePLTPath">Dynamically Changing the PLT Search Path</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileCreateDeepDirectory">Creating Directories Including Parent Directories</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileDeletingAFile">Deleting a File</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileDirectorySize">Computing the Size of a Directory</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileNameFromPath">Extracting the File Name from a Path</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileNamesMatchingRegularExpression">Finding All Files Whose Name Match a Regular Expression</a> (Recipe)
</li>
<li> <a href="/Cookbook/FilePLTPath">Finding a File on the PLT Scheme Search Path</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileProcessWords">Processing Every Word in a File</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileProcessingAllFilesInADirectory">Processing All Files in a Directory</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileRandomAccessIO">Using Random-Access Input/Output</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileRandomAccessUpdate">Updating a Random-Access File</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileReadIni">Reading Configuration Data from a File</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileReadParagraph">Reading a Text File by Paragraphs</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileReadRandomLine">Retrieving a Line at Random from a File of Unknown Size</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileReadSpecificLine">Reading a Particular Line from a File</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileReadZip">Reading Data from ZIP Files</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileRenameRecursive">Renaming Files Throughout a Directory Tree</a> (Recipe)
</li>
<li> <a href="/Cookbook/FileSearchPath">Finding a File Given an Arbitrary Search Path</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileSearchReplace">Searching and Replacing Text in a File</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileVersion">Versioning Filenames</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
<li> <a href="/Cookbook/FileWrite">Writing to a File</a> (Recipe)
</li>
<li> <a href="/Cookbook/FilesCopyingOrMovingAFile">Copying or Moving a File</a> (Recipe)
</li>
<li> <a href="/Cookbook/PLTFileToText">Convert any source file to text</a> (Recipe)
</li>
<li> <a href="/Cookbook/ReadLineContinuation">Reading Lines with Continuation Characters</a> (<a href="/Cookbook/RecipeStub">RecipeStub</a>)
</li>
</ul>
<p />
<p />
<p />
<p />
<h2>
  <a name="_Comments">  Comments </a>
</h2>
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<br>
<hr>
<a href="/Cookbook/FileChapterComments">(edit comments)</a>
<p />
<h2>
  <a name="_Comments">  Comments </a>
</h2>
<p />
<p />
<p />
<p />
<p />
<ul>
<li> Set ALLOWTOPICCHANGE = <a href="/Main/SchematicsEditorsGroup">SchematicsEditorsGroup</a>
</li>
</ul>
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Chapter </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/TOC">TOC</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 090 </td>
</tr>
</table>
<p />
 </div>
</div>
