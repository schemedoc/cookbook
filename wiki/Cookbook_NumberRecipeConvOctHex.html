<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Converting_Between_Octal_and_Hex"> Converting Between Octal and Hexadecimal  </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to convert a string (e.g., "0x55" or "0755") containing an octal or hexadecimal number to the correct number.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
Use the <code>string-&gt;number</code> and <code>number-&gt;string</code> built in functions.
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="builtin">string-&gt;number</span> <span class="selfeval">"55"</span> <span class="selfeval">16</span>)
<span class="selfeval">85</span>
<span class="builtin">&gt;</span> (<span class="builtin">string-&gt;number</span> <span class="selfeval">"0755"</span> <span class="selfeval">8</span>)
<span class="selfeval">493</span>
</pre>
</div>
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
The <code>string-&gt;number</code> function takes an optional radix (which must be
an exact integer, either 2, 8, 10, or 16).  If not supplied, it defaults to decimal unless an explicit radix is included in the number string.  For example, "#o177" is octal, "#xff" is hexadecimal.
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="builtin">string-&gt;number</span> <span class="selfeval">"#o177"</span>)
<span class="selfeval">127</span>
<span class="builtin">&gt;</span> (<span class="builtin">string-&gt;number</span> <span class="selfeval">"#XFF"</span>)
<span class="selfeval">255</span>
</pre>
</div>
<p />
Note that the radix and numbers may be upper or lower case.
<p />
Here's an example that accepts a number in either decimal, octal, or hex, and prints that number in all three bases. It uses the oct function to convert from octal and hexadecimal if the input began with a 0. It then uses printf to convert back into hex, octal, and decimal as needed.
<p />
<div class="scheme">
  <pre>(<span class="keyword">define</span> (<span class="variable">convert</span> <span class="variable">str</span>)
  (<span class="keyword">let</span> ((<span class="variable">num</span> (<span class="builtin">string-&gt;number</span> <span class="variable">str</span>)))
    (<span class="variable">printf</span> <span class="selfeval">"decimal=~a, hex=~a, octal=~a"</span>
            (<span class="builtin">number-&gt;string</span> <span class="variable">num</span>)
            (<span class="builtin">number-&gt;string</span> <span class="variable">num</span> <span class="selfeval">16</span>)
            (<span class="builtin">number-&gt;string</span> <span class="variable">num</span> <span class="selfeval">8</span>))))
<span class="builtin">&gt;</span> (<span class="variable">convert</span> <span class="selfeval">"#o17"</span>)
<span class="variable">decimal=15</span><span class="keyword">,</span> <span class="variable">hex=f</span><span class="keyword">,</span> <span class="variable">octal=17</span>
<span class="builtin">&gt;</span> (<span class="variable">convert</span> <span class="selfeval">"17"</span>)
<span class="variable">decimal=17</span><span class="keyword">,</span> <span class="variable">hex=11</span><span class="keyword">,</span> <span class="variable">octal=21</span>
<span class="builtin">&gt;</span> (<span class="variable">convert</span> <span class="selfeval">"#X17"</span>)
<span class="variable">decimal=23</span><span class="keyword">,</span> <span class="variable">hex=17</span><span class="keyword">,</span> <span class="variable">octal=27</span>
</pre>
</div>
<p />
The following code converts Unix file permissions. They're always given in octal, so we assume base 8:
<p />
<div class="scheme">
  <pre>(<span class="keyword">define</span> (<span class="variable">fp-convert</span> <span class="variable">str</span>)
  (<span class="keyword">let</span> ((<span class="variable">perm</span> (<span class="builtin">string-&gt;number</span> <span class="variable">str</span> <span class="selfeval">8</span>)))
    (<span class="variable">printf</span> <span class="selfeval">"The decimal value is ~a~n"</span> (<span class="builtin">number-&gt;string</span> <span class="variable">perm</span>))))
<span class="builtin">&gt;</span> (<span class="variable">fp-convert</span> <span class="selfeval">"777"</span>)
<span class="variable">The</span> <span class="variable">decimal</span> <span class="variable">value</span> <span class="variable">is</span> <span class="selfeval">511</span>
</pre>
</div>
<p />
<h3>
  <a name="See_Also"> See Also </a>
</h3>
<a href="/Cookbook/NumberRecipesConvertBinDec">NumberRecipesConvertBinDec</a>
<p />
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/NumberRecipes">NumberRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 130 </td>
</tr>
</table>
<p />
 </div>
</div>
