<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Time_Arithmetic"> Time Arithmetic </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You have a date and time and want to find the date and time of some
period in the future or past.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
By using <a href="http://srfi.schemers.org/srfi-19/" target="_top">SRFI 19</a>, subtracting,
and adding seconds is all you need:
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"19.ss"</span> <span class="selfeval">"srfi"</span>))
(<span class="keyword">let</span> ((<span class="variable">now</span> (<span class="variable">current-seconds</span>))                    <span class="comment">;; using PLT
</span>      (<span class="variable">now-srfi-19</span> (<span class="variable">time-second</span> (<span class="variable">current-time</span>))) <span class="comment">;; using SRFI-19
</span>      (<span class="variable">24-hours-from-now</span> (<span class="builtin">*</span> <span class="selfeval">24</span> <span class="selfeval">60</span> <span class="selfeval">60</span>)))          <span class="comment">;; in seconds!
</span>  (<span class="builtin">values</span> (<span class="builtin">+</span> <span class="variable">now</span> <span class="variable">24-hours-from-now</span>)
          (<span class="builtin">+</span> <span class="variable">now-srfi-19</span> <span class="variable">24-hours-from-now</span>)))
</pre>
</div>
<p />
On the other hand, if what you want is to obtain the difference
between two different times, then you could use the procedure
<code>time-difference</code>, as in:
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"19.ss"</span> <span class="selfeval">"srfi"</span>))
(<span class="keyword">let</span> ((<span class="variable">t1</span> (<span class="variable">make-time</span> <span class="keyword">'</span><span class="variable">time-utc</span> <span class="selfeval">0</span> <span class="selfeval">5000</span>))
      (<span class="variable">t2</span> (<span class="variable">make-time</span> <span class="keyword">'</span><span class="variable">time-utc</span> <span class="selfeval">0</span> <span class="selfeval">2000</span>)))
  (<span class="keyword">let</span> ((<span class="variable">duration</span> (<span class="variable">time-difference</span> <span class="variable">t1</span> <span class="variable">t2</span>)))
    (<span class="builtin">values</span> (<span class="variable">time-second</span> <span class="variable">duration</span>)
            (<span class="variable">time-nanosecond</span> <span class="variable">duration</span>))))
</pre>
</div>
<p />
The example above, as you surely guessed, returns the values <code>0</code>, and
<code>3000</code>, which represent the nano-seconds, and seconds in the
difference of the input times, respectively.  However, note that the
return value of <code>time-difference</code> is an instance of the <code>time</code> type.
<p />
<strong>Important note:</strong> It is an error if the times passed as arguments to
<code>time-difference</code> are of different time types.
<p />
Furthermore, if you use care with the time duration types in your
program, you can safely add or subtract to a given time directly (instead of adding seconds).  In this case, you can use any kind of time as input.
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"19.ss"</span> <span class="selfeval">"srfi"</span>))
(<span class="keyword">let</span> ((<span class="variable">now</span> (<span class="variable">current-time</span>))
      (<span class="variable">duration</span> (<span class="variable">make-time</span> <span class="keyword">'</span><span class="variable">time-duration</span> <span class="selfeval">0</span> (<span class="builtin">*</span> <span class="selfeval">24</span> <span class="selfeval">60</span> <span class="selfeval">60</span>))))
  (<span class="builtin">values</span>
   (<span class="variable">add-duration</span> <span class="variable">now</span> <span class="variable">duration</span>)        <span class="comment">;; 24 hours from now
</span>   (<span class="variable">subtract-duration</span> <span class="variable">now</span> <span class="variable">duration</span>))) <span class="comment">;; 24 hours in the past
</span>
</pre>
</div>
<p />
<h3>
  <a name="See_Also"> See Also </a>
</h3>
<p />
<a href="http://srfi.schemers.org/srfi-19/" target="_top">SRFI 19: Time Data Types and Procedures</a>
<p />
<p />
<p />
<h4>
  <a name="Comments_here"> Comments here </a>
</h4>
<p />
-- <a href="/Main/FranciscoSolsona">FranciscoSolsona</a> - 05 May 2004
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/TimeRecipes">TimeRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 040 </td>
</tr>
</table>
<p />
 </div>
</div>
