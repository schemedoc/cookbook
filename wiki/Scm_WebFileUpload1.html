<div id="contentbox">
 <div class="widget">
  #!/bin/sh
":";exec /home/solsona/scheme/plt/bin/mzscheme -r $0
<p />
(require (lib "cgi.ss" "net")
         (lib "file-upload.ss" "net"))
<p />
(let* ((b (get-bindings/mime))
       (name (extract-binding/single "Name" b))
       (email (extract-binding/single "Email" b))
       (picture (extract-binding/single "Picture" b)))
  ;; Process information, and do the actual registration...
  ;; ... and finally, we return to the user (HTML of course)
  (let ((image (car picture))
        (writeme (cadddr picture)))
    (call-with-output-file (build-path "/usr/local/www/data/images/" image) writeme)
    (generate-html-output
     "Thank you!"
     (list (format "Dear ~a, " name)
           "We have received your information, and this completes the registration process."
           "Thank you!."
           "<br>"
           (format "<img src="\" images/~a\ border="\">" image))))
  )
<p />
<p />
 </div>
</div>
