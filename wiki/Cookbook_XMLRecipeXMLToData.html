<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Parsing_XML_into_Data_Structures"> Parsing XML into Data Structures </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want a list that corresponds to the structure and content of an XML file.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
For example you have this example:
<p />
<pre>
&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;rhythmdb version="1.0"&gt;
  &lt;entry type="song"&gt;
    &lt;title&gt;Never Let Me Down Again&lt;/title&gt;
    &lt;genre&gt;Pop/Rock&lt;/genre&gt;
    &lt;artist&gt;Depeche Mode&lt;/artist&gt;
    &lt;album&gt;Music For The Masses&lt;/album&gt;
    &lt;track-number&gt;1&lt;/track-number&gt;
    &lt;duration&gt;287&lt;/duration&gt;
    &lt;file-size&gt;6533368&lt;/file-size&gt;
    &lt;location&gt;file:///home/hector/ogg/depeche_mode/music_for_the_masses/never_let_me_down_again.ogg&lt;/location&gt;
    &lt;mtime&gt;1079831032&lt;/mtime&gt;
    &lt;play-count&gt;1&lt;/play-count&gt;
    &lt;last-played&gt;1083552958&lt;/last-played&gt;
    &lt;mimetype&gt;&lt;/mimetype&gt;
  &lt;/entry&gt;
&lt;/rhythmdb&gt;
</pre>
<p />
We will use <a href="/Cookbook/SSAX">SSAX</a> library to parse this XML file in to a SXML abstract syntax tree.
In specific we will use the ssax:xml-&gt;sxml function that takes a stream and a list of (user-prefix . uri-string) that assigns user prefixes to certain namespaces identified by particular URIs. In this example the file is a config named rhythmdb.xml and the XML namespace is the default so we put the empty list.
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">planet</span> <span class="selfeval">"ssax.ss"</span> (<span class="selfeval">"lizorkin"</span> <span class="selfeval">"ssax.plt"</span> <span class="selfeval">1</span>)))
(<span class="variable">ssax:xml-&gt;sxml</span> (<span class="builtin">open-input-file</span> <span class="selfeval">"rhythmdb.xml"</span>) <span class="keyword">'</span>())
</pre>
</div>
<p />
This outputs a SXML abstract syntax tree that for all situations can be handled like a list:
<p />
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="variable">ssax:xml-&gt;sxml</span> (<span class="builtin">open-input-file</span> <span class="selfeval">"rhythmdb.xml"</span>) <span class="keyword">'</span>())
(|<span class="global">*TOP*</span>|
 (|<span class="global">*PI*</span>| <span class="variable">xml</span> <span class="selfeval">"version=\"1.0\" standalone=\"yes\""</span>)
 (<span class="variable">rhythmdb</span>
   (<span class="variable">@</span> (<span class="variable">version</span> <span class="selfeval">"1.0"</span>))
   (<span class="variable">entry</span>
    (<span class="variable">@</span> (<span class="variable">type</span> <span class="selfeval">"song"</span>))
    (<span class="variable">title</span> <span class="selfeval">"Never Let Me Down Again"</span>)
    (<span class="variable">genre</span> <span class="selfeval">"Pop/Rock"</span>)
    (<span class="variable">artist</span> <span class="selfeval">"Depeche Mode"</span>)
    (<span class="variable">album</span> <span class="selfeval">"Music For The Masses"</span>)
    (<span class="variable">track-number</span> <span class="selfeval">"1"</span>)
    (<span class="variable">duration</span> <span class="selfeval">"287"</span>)
    (<span class="variable">file-size</span> <span class="selfeval">"6533368"</span>)
    (<span class="variable">location</span> <span class="selfeval">"file:///home/hector/ogg/depeche_mode/music_for_the_masses/never_let_me_down_again.ogg"</span>)
    (<span class="variable">mtime</span> <span class="selfeval">"1079831032"</span>)
    (<span class="variable">play-count</span> <span class="selfeval">"1"</span>)
    (<span class="variable">last-played</span> <span class="selfeval">"1083552958"</span>)
    (<span class="variable">mimetype</span>))))
</pre>
</div>
<p />
If we want to parse the rhythmdb.xml from a string, we use:
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">planet</span> <span class="selfeval">"ssax.ss"</span> (<span class="selfeval">"lizorkin"</span> <span class="selfeval">"ssax.plt"</span> <span class="selfeval">1</span>)))
(<span class="variable">ssax:xml-&gt;sxml</span> (<span class="variable">open-input-string</span> <span class="variable">rhythmdb-string</span>) <span class="keyword">'</span>())
</pre>
</div>
<p />
And the output is the same from parsing the rhythmd.xml file.
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
Discussion here
<p />
<h3>
  <a name="See_Also"> See Also </a>
</h3>
<p />
<ul>
<li> <a href="http://ssax.sourceforge.net/" target="_top">SSAX/SXML Home Page</a>
</li>
</ul>
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
Shortening the <code>location</code> element to about 40 characters would make Web and print layout easier.
<p />
-- <a href="/Main/NeilVanDyke">NeilVanDyke</a> - 20 May 2004
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/HectorEGomezMorales">HectorEGomezMorales</a> - 19 May 2004
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/XmlRecipes">XmlRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 010 </td>
</tr>
</table>
<p />
 </div>
</div>
