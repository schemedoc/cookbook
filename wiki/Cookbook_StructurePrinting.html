<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Printing_Structures"> Printing Structures </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
By default structures are printed like <code>#&lt;struct:s&gt;</code> by the REPL, <code>display</code> and so on.  You want to see the contents of structures when they are printed.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
There are two steps to getting the contents of structures printed.  You must:
<p />
<ol>
<li> Make the structure transparent so other code can inspect its content
</li>
<li> Tell the default printer to print out the contents of transparent structures
</li>
</ol>
<p />
To do the first you must pass an inspector to the call of <code>define-struct</code> like so:
<p />
<div class="scheme">
  <pre><span class="comment">;; Do this
</span>(<span class="keyword">define-struct</span> <span class="variable">foo</span> (<span class="variable">field1</span> <span class="variable">field2</span>) (<span class="variable">make-inspector</span>))
<span class="comment">;; Or do this
</span>(<span class="keyword">define-struct</span> <span class="variable">foo</span> (<span class="variable">field1</span> <span class="variable">field2</span>) <span class="selfeval">#f</span>)
</pre>
</div>
<p />
Then you must set the <code>print-struct</code> parameter to <code>#t</code>, like so:
<p />
<div class="scheme">
  <pre><span class="comment">;; Either set the parameter globablly
</span>(<span class="variable">print-struct</span> <span class="selfeval">#t</span>)
<span class="comment">;; Or set it in the scope of some expressions
</span>(<span class="variable">parameterize</span>
  ((<span class="variable">print-struct</span> <span class="selfeval">#t</span>))
  <span class="variable">expr</span> ...)
</pre>
</div>
<p />
Here's a complete example:
<p />
<div class="scheme">
  <pre><span class="comment">;; opaque is opaque, transparent is transparent
</span><span class="builtin">&gt;</span> (<span class="keyword">define-struct</span> <span class="variable">opaque</span> (<span class="variable">a</span> <span class="variable">b</span>))
<span class="builtin">&gt;</span> (<span class="keyword">define-struct</span> <span class="variable">transparent</span> (<span class="variable">a</span> <span class="variable">b</span>) <span class="selfeval">#f</span>)
<span class="comment">;; but both aren't printed out with the default setting on print-struct
</span><span class="builtin">&gt;</span> (<span class="variable">make-opaque</span> <span class="selfeval">1</span> <span class="selfeval">2</span>)
<span class="variable">#&lt;struct:opaque&gt;</span>
<span class="builtin">&gt;</span> (<span class="variable">make-transparent</span> <span class="selfeval">1</span> <span class="selfeval">2</span>)
<span class="variable">#&lt;struct:transparent&gt;</span>
<span class="comment">;; we change print-struct
</span><span class="builtin">&gt;</span> (<span class="variable">print-struct</span> <span class="selfeval">#t</span>)
<span class="builtin">&gt;</span> (<span class="variable">make-opaque</span> <span class="selfeval">1</span> <span class="selfeval">2</span>)
<span class="variable">#&lt;struct:opaque&gt;</span>
<span class="comment">;; and now the contents of transparent structures is printed
</span><span class="builtin">&gt;</span> (<span class="variable">make-transparent</span> <span class="selfeval">1</span> <span class="selfeval">2</span>)
<span class="selfeval">#3</span>(<span class="variable">struct:transparent</span> <span class="selfeval">1</span> <span class="selfeval">2</span>)
</pre>
</div>
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
The output produced by the REPL, <code>display</code>, and most other high-level output functions is controlled by a function known as the default print handler.  Its behaviour can be customised by a number of parameters.  We've already seen on such parameter: <code>print-struct</code>.  There are many more, such as <code>print-hash-table</code>.  See the <a href="/Cookbook/PltScheme">PltScheme</a> documentation for more information on these parameters.
<p />
Additionally, the default print handler can be changed globally, or on a port by port basis.  This allows output to be completely customised, or changed for specified ports.  See the documentation for <code>current-print</code>, and <code>port-print-handler</code>.
<p />
Inspectors are used to control access to structure information and to module bindings.  When we pass an inspector to <code>define-struct</code>, it isn't actually that inspector that control access, but the parent of that inspector.  We can provide a parent explicitly, like so: <code>(make-inspector parent)</code>.  If we don't provide a parent the value of the <code>current-inspector</code> parameter is taken.  Note there is a slight difference between passing  an inspector and <code>#f</code> to <code>define-struct</code>.  The former gives control to the inspector's parent, while the latter make the structure transparent to all code.  This subtle difference doesn't mean much in most cases, but could lead to differences when making advanced uses of inspectors.
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/NoelWelsh">NoelWelsh</a> - 20 Apr 2006
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/StructureRecipes">StructureRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 999 </td>
</tr>
</table>
<p />
 </div>
</div>
