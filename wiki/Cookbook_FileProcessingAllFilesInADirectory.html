<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Processing_All_Files_in_a_Direct"> Processing All Files in a Directory </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to do something to each file in a particular directory.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
Use <a href="/Cookbook/PltScheme">PltScheme</a>'s standard function <code>directory-list</code> to retrieve the contents in a directory and do something with them.
<p />
<div class="scheme">
  <pre>(<span class="builtin">for-each</span> <span class="variable">do-something-with-the-contents</span>
          (<span class="builtin">map</span> (<span class="keyword">lambda</span> (<span class="variable">f</span>)
                 (<span class="builtin">string-append</span> <span class="variable">path</span> <span class="selfeval">"/"</span> <span class="variable">f</span>))
               (<span class="variable">directory-list</span> <span class="variable">path</span>)))
</pre>
</div>
<p />
You just have to take in account that <code>directory-list</code> <strong>returns a list of all files and directories</strong> in the directory specified by path. If path is omitted, a list of files and directories in the current directory is returned.
<p />
<strong>If you need to process the files only</strong>.  We can define a new procedure that only retrieves the files in a directory like this:
<p />
<div class="scheme">
  <pre>(<span class="keyword">require</span> (<span class="variable">lib</span> <span class="selfeval">"list.ss"</span> <span class="selfeval">"srfi"</span> <span class="selfeval">"1"</span>))<span class="comment">;; to use the filter procedure
</span>
<span class="comment">;; directory-list-files: String -&gt; (listof String)
</span><span class="comment">;; Obtains a list with the files (only) in the specified path
</span>(<span class="keyword">define</span> (<span class="variable">directory-list-files</span> <span class="variable">path</span>)
  (<span class="variable">filter</span> (<span class="keyword">lambda</span> (<span class="variable">v</span>)
            (<span class="variable">file-exists?</span> (<span class="builtin">string-append</span> <span class="variable">path</span> <span class="selfeval">"/"</span> <span class="variable">v</span>)))
          (<span class="variable">directory-list</span> <span class="variable">path</span>)))
</pre>
</div>
<p />
So our first code will turn into
<p />
<div class="scheme">
  <pre>(<span class="builtin">for-each</span> <span class="variable">do-something-with-the-contents</span>
          (<span class="builtin">map</span> (<span class="keyword">lambda</span> (<span class="variable">f</span>)
                 (<span class="builtin">string-append</span> <span class="variable">path</span> <span class="selfeval">"/"</span> <span class="variable">f</span>))
               (<span class="variable">directory-list-files</span> <span class="variable">path</span>)))
</pre>
</div>
<p />
<p />
Finally, in the previous examples we used the <code>for-each</code> procedure, that applies a procedure to each element in a list, but returns void. If you want to return a value you may want to use the <code>map</code> procedure instead of <code>for-each</code>.
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
<p />
<p />
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/IvanHernandez">IvanHernandez</a> - 03 Jun 2004
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/FileRecipes">FileRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 999 </td>
</tr>
</table>
<p />
 </div>
</div>
