<div id="contentbox">
 <div class="widget">
  <p />
<h2>
  <a name="Taking_Logarithms"> Taking Logarithms </a>
</h2>
<p />
<h3>
  <a name="Problem"> Problem </a>
</h3>
<p />
You want to take a logarithm in various bases.
<p />
<h3>
  <a name="Solution"> Solution </a>
</h3>
<p />
For logarithms to base e, use the built-in log:
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="builtin">log</span> (<span class="builtin">exp</span> <span class="selfeval">2</span>))
<span class="selfeval">2</span>
<span class="builtin">&gt;</span> (<span class="builtin">log</span> <span class="selfeval">2.718281828</span>)
</pre>
</div>
<p />
Note that <code>log</code> is often called <code>ln</code> in the mathematical literature.
<p />
<h3>
  <a name="Discussion"> Discussion </a>
</h3>
<p />
R5RS Scheme mandates the presence of natural logarithm (ln, which is written <code>log</code> in Scheme).  If you want logarithms in some other base you need to use the standard mathematical relation:
<pre>
                  log(x)
   log (x)  =   ---------
      n           log(n)
</pre>
<p />
Example:
<p />
To find the base 10 logarithm of 1.82:
<pre>
                    log(1.82)
   log (1.82)  =   -----------
      10             log(10)
</pre>
<div class="scheme">
  <pre><span class="builtin">&gt;</span> (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="selfeval">1.82</span>) (<span class="builtin">log</span> <span class="selfeval">10</span>))
<span class="selfeval">0.2600713879850748</span>
</pre>
</div>
<p />
<p />
The most common bases besides e is 2 and 10. These logarithms are often
called <code>log2</code> and <code>log10</code>.
<div class="scheme">
  <pre>(<span class="keyword">define</span> (<span class="variable">log2</span> <span class="variable">x</span>)
  (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) (<span class="builtin">log</span> <span class="selfeval">2</span>))
(<span class="keyword">define</span> (<span class="variable">log10</span> <span class="variable">x</span>)
  (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) (<span class="builtin">log</span> <span class="selfeval">10</span>))
</pre>
</div>
To avoid recomputation of the denominator at each call, one can use:
<div class="scheme">
  <pre>(<span class="keyword">define</span> <span class="variable">log2</span>
  (<span class="keyword">let</span> ([<span class="variable">denom</span> (<span class="builtin">log</span> <span class="selfeval">2</span>)])
     (<span class="variable">lamdda</span> (<span class="variable">x</span>)
        (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) <span class="variable">denom</span>))))
(<span class="keyword">define</span> <span class="variable">log10</span>
  (<span class="keyword">let</span> ([<span class="variable">denom</span> (<span class="builtin">log</span> <span class="selfeval">10</span>)])
     (<span class="variable">lamdda</span> (<span class="variable">x</span>)
        (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) <span class="variable">denom</span>))))
</pre>
</div>
<p />
A general version is:
<div class="scheme">
  <pre>(<span class="keyword">define</span> (<span class="variable">log-n</span> <span class="variable">n</span> <span class="variable">x</span>)
  (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">x</span>) (<span class="builtin">log</span> <span class="variable">n</span>)))
<span class="builtin">&gt;</span> (<span class="variable">log-n</span> <span class="selfeval">10</span> <span class="selfeval">1.82</span>)
<span class="selfeval">0.2600713879850748</span>
</pre>
</div>
<p />
<p />
<p />
<hr>
<p />
<h3>
  <a name="Comments_about_this_recipe"> Comments about this recipe </a>
</h3>
<p />
Names modified per your suggestion.  :-)
<p />
-- <a href="/Main/BrentAFulgham">BrentAFulgham</a> - 14 May 2004
<p />
I recently had to make this <code>log10</code>.  Too bad log information isn't preserved as part of exactness. :)
<p />
<div class="scheme">
  <pre>(<span class="keyword">define</span> <span class="variable">log10</span> (<span class="keyword">let</span> ((<span class="variable">ln-10</span> (<span class="builtin">log</span> <span class="selfeval">10</span>))) (<span class="keyword">lambda</span> (<span class="variable">n</span>) (<span class="builtin">/</span> (<span class="builtin">log</span> <span class="variable">n</span>) <span class="variable">ln-10</span>))))
</pre>
</div>
<p />
I second the idea of a library for this.  Actually, a couple of these
log functions <em>really</em> belong in <span style="background : #FFFFCE;">
  <font color="#0000FF">MzLib</font>
</span><a href="/edit/Cookbook/MzLib?topicparent=Cookbook.NumberRecipeTakingLogs">?</a> if not <a href="/Cookbook/MzScheme">MzScheme</a> default environment, IMHO.
<p />
-- <a href="/Main/NeilVanDyke">NeilVanDyke</a> - 14 May 2004
<p />
By the way, I'd suggest not planting the idea of using underscores in Scheme identifiers, even though underscore makes sense to <span style="background : #FFFFCE;">
  <font color="#0000FF">TeX</font>
</span><a href="/edit/Cookbook/TeX?topicparent=Cookbook.NumberRecipeTakingLogs">?</a> users in the case of <code>log_e</code>.  How about <code>log-e</code> or <code>loge</code>?
<p />
-- <a href="/Main/NeilVanDyke">NeilVanDyke</a> - 14 May 2004
<p />
I reformatted the math formulas. I had an itch to change <code>log-n</code> to <code>logn</code>.
The <code>-</code> will disturb my eye in a mathematical context. Besides, the names <code>log2</code> and
<code>log10</code> are the traditional ones.
<p />
<h3>
  <a name="Contributors"> Contributors </a>
</h3>
<p />
-- <a href="/Main/BrentAFulgham">BrentAFulgham</a> - 14 May 2004
  <p />
<table border="1" cellspacing="0" cellpadding="0">
   <tr>
  <th colspan="2" align="center" bgcolor="#99CCCC"> <a href="/Cookbook/CookbookForm">CookbookForm</a> </th>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicType">TopicType</a>:</th>
  <td align="left"> Recipe </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/ParentTopic">ParentTopic</a>:</th>
  <td align="left"> <a href="/Cookbook/NumberRecipes">NumberRecipes</a> </td>
</tr>
<tr>
  <th bgcolor="#99CCCC" align="right"> <a href="/Cookbook/TopicOrder">TopicOrder</a>:</th>
  <td align="left"> 110 </td>
</tr>
</table>
<p />
 </div>
</div>
